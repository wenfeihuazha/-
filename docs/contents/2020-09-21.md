# 函数调用中this指向

## 问题

```js
// 第一题
var length = 10;
function fn(){
  console.log(this.length)
}

var obj = {
  lenght: 5,
  method:function(fn){
    fn();
    arguments[0]();
  }
};

obj.method(fn,1)

// 第二题
function a(xx){
  this.x = xx;
  return this;
}

var x = a(5);
var y = a(6);
 
console.log(x.x);
console.log(y.x);
```

## 答案

- 10 => 2
- undefined => 6

## 解析

其实本题考点并不难,设计到 this 指向的问题,
- 在第一题中,直接调用外部的fn,其实等于 window.fn() 所以指向 window 但是第二个 arguments[0](); 可以理解为 arguments.fn() 所以 this 指向就指向了arguments , arguments 是一个伪数组,但是也拥有 length 属性, 所以输出 2
- 在第二题中, function a 中的this的上下文环境为 window ,所以 this.x 等于 window.x 所以调用一次 window 上的x变量修改一次,所以两次结果都为6
> (以上是错误思路,不删除 已做警醒)
> 在第二题中,有一个关键地方被我忽略,就是 func a 中赋值的变量 x 后再下面调用的变量也为 x ,所以在 x = a(5) 后 window.x  = window ,但是在调用 y = a(6) 后, x的值重新被修改为 6 . 所以 6.x 为undefined